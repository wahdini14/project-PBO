<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <link rel="stylesheet" th:href="@{/css/dashboardstyle.css}">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Sharp:opsz,wght,FILL,GRAD@48,400,0,0" />
</head>
<body>
    <div class="container">
        <!-- Sidebar sec start -->
         <aside>
            <div class="top">
                <div class="logo">
                    <h2>Kerja<span class="danger">Kilat</span></h2>
                </div>
            </div>
            <!-- end top -->

            <div class="sidebar">
                <a th:href="@{/dashboard}" class="active">
                    <span class="material-symbols-sharp"> grid_view </span>
                    <h3>Dashboard</h3>
                </a>
                <a th:href="@{/tambahpekerjaan}">
                    <span class="material-symbols-sharp"> add_notes </span>
                    <h3>Tambahkan Pekerjaan</h3>
                </a>

                <a th:href="@{/pekerjaansaya}">
                    <span class="material-symbols-sharp"> work </span>
                    <h3>Pekerjaan Saya</h3>
                    <span th:if="${acceptedNotifications != null and acceptedNotifications > 0}" class="notif-badge" th:text="${acceptedNotifications}"></span>
                </a>
                <a th:href="@{/message}" id="sidebar-message-link">
                    <span class="material-symbols-sharp"> message </span>
                    <h3>Pesan</h3>
                    <span class="notif-dot" id="sidebar-message-dot" style="display:none"></span>
                </a>
                <a th:href="@{/profile}">
                    <span class="material-symbols-sharp"> account_circle </span>
                    <h3>Profil</h3>
                </a>
                <a href="javascript:void(0)" onclick="openLogoutPopup()">
                    <span class="material-symbols-sharp"> logout </span>
                    <h3>Keluar</h3>
                </a>

            </div>
         </aside>
        <!-- Sidebar sec end -->

        <!-- Main sec start  -->
         <main class="box">
            <h1 class="title">Dashboard</h1>

            <!-- Welcome Card -->
            <div class="welcome-card">
                <h2>Halo, <span th:text="${username}">User</span></h2>
                <p>"Senang bertemu lagi! Siap memulai aktivitas hari ini?"</p>
            </div>

            <!-- Search Bar -->
            <div class="search-box">
                <span class="material-symbols-sharp"> search</span>
                <input type="text" placeholder="Search...">
            </div>

            <h2 class="subtitle">Pekerjaan Terbaru</h2>

            <!-- Job List -->
            <div class="job-list">
                <!-- job card -->
                <div th:each="job : ${jobs}" class="job-card">
                    <h3 class="job-title" th:text="${job.title}"></h3>
                    <p class="location" th:text="${job.location}"></p>
                    <p class="price" th:text="${job.price}"></p>
                    <button class="detail-btn"
                            th:onclick="|location.href='/job/${job.id}'|">
                        Lihat Detail
                    </button>

                </div>

            </div>


         </main>        
         <!-- Main sec end -->
    </div>
    <!-- LOGOUT CONFIRMATION POPUP -->
    <div class="logout-overlay" id="logoutPopup" style="display: none;">
        <div class="logout-box">
            <h3>Apa kamu yakin ingin keluar?</h3>

            <div class="logout-actions">
                <button class="btn-yes" onclick="confirmLogout()">Ya</button>
                <button class="btn-no" onclick="closeLogoutPopup()">Tidak</button>
            </div>
        </div>
    </div>

    
    <script th:src="@{/js/dashboard.js}"></script>
</body>
</html>

<!-- 
    dashboard.html (Template View)
    Tanggung Jawab: Menampilkan halaman utama dashboard setelah user login, menampilkan daftar pekerjaan terbaru, dan navigasi ke fitur-fitur lain.
    Komponen Utama:
    - Sidebar navigasi dengan menu: Dashboard, Tambah Pekerjaan, Pekerjaan Saya (dengan badge notifikasi), Pesan, Profil, Logout.
    - Welcome card dengan salam personal kepada user.
    - Job list yang menampilkan pekerjaan terbaru dari database.
    - Logout confirmation popup untuk konfirmasi sebelum logout.
    SOLID Principles:
    - Single Responsibility: Template ini fokus hanya pada tampilan dashboard dan navigasi, tidak ada business logic.
    - Separation of Concerns: JavaScript untuk logout logic sudah terpisah di dashboard.js.
    Fitur Notifikasi:
    - Badge pada "Pekerjaan Saya" menampilkan jumlah accepted applications (acceptedNotifications dari controller).
    - Dot notifikasi pada "Pesan" (jika ada pesan baru, managed di dashboard.js).
-->